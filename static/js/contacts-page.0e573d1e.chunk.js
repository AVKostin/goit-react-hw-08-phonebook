"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[141],{9376:function(e,n,t){t.d(n,{Q:function(){return c}});var a=t(6373),r="LoaderButton_wrapper__pjSem",s=t(184),c=function(){return(0,s.jsx)("div",{className:r,children:(0,s.jsx)(a.iT,{ariaLabel:"loading-indicator",height:35,width:35,strokeWidth:8,color:"white",secondaryColor:"red"})})}},7916:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var a=t(4942),r=t(1413),s=t(885),c=t(2791),o=t(5206),i=t(9434),u=t(757),l=t(1614),m=t(4554),d=t(3044),h=t(890),f=t(2477),p=t(4953),x=t(6151),Z=t(3032),b=t(2286),j=t(9376),g="ContactForm_titleName__YfhZd",v=t(184),_=b.Z.getContacts,C=b.Z.getContactsStatus,w=/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,y=/^\+?[0-9]?[0-9]?([0-9]{10})$/,k=function(){var e=(0,i.I0)(),n=(0,i.v9)(_),t="creating"===(0,i.v9)(C),b=(0,c.useState)({name:"",number:""}),k=(0,s.Z)(b,2),A=k[0],N=k[1],S=(0,c.useState)({name:"",number:""}),F=(0,s.Z)(S,2),z=F[0],I=F[1],W=function(e,n,t){return n.match(t)?(N((0,r.Z)((0,r.Z)({},A),{},(0,a.Z)({},e,n))),I((0,r.Z)((0,r.Z)({},z),{},(0,a.Z)({},e,""))),!0):n?(N((0,r.Z)((0,r.Z)({},A),{},(0,a.Z)({},e,n))),I((0,r.Z)((0,r.Z)({},z),{},(0,a.Z)({},e,"wrong ".concat(e)))),!1):(N((0,r.Z)((0,r.Z)({},A),{},(0,a.Z)({},e,n))),I((0,r.Z)((0,r.Z)({},z),{},(0,a.Z)({},e,"".concat(e," is required")))),!1)},T=function(e){var n=e.currentTarget,t=n.name,a=n.value;switch(t){case"name":W(t,a,w);break;case"number":W(t,a,y);break;default:return}};return(0,v.jsx)(l.Z,{component:"div",maxWidth:"xs",children:(0,v.jsxs)(m.Z,{sx:{marginTop:3,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,v.jsxs)("div",{className:g,children:[(0,v.jsx)(d.Z,{sx:{m:1,bgcolor:"orange"},children:(0,v.jsx)(u.Z,{})}),(0,v.jsx)(h.Z,{component:"h1",variant:"h4",children:"Phonebook"})]}),(0,v.jsxs)(m.Z,{component:"form",onSubmit:function(t){t.preventDefault();var a=n.find((function(e){return e.name===A.name})),r=n.find((function(e){return e.number===A.number}));if(a)o.Am.warn("Name is already in contacts.");else if(r)o.Am.warn("Number is already in contacts.");else if(W("name",A.name,w)&&W("number",A.number,y)){var s={name:A.name,number:A.number};e((0,Z.uK)(s)).unwrap().then((function(n){o.Am.success("".concat(n.name," is add in contacts.")),e((0,Z.yF)()).unwrap().then((function(){o.Am.success("Contacts updated")})).catch((function(){o.Am.error("Contacts didn't updated")})),N({name:"",number:""})})).catch((function(){o.Am.error("".concat(A.name," isn't add in contacts."))}))}},noValidate:!0,sx:{mt:3},children:[(0,v.jsx)(f.Z,{title:"Name may contain only letters, apostrophe, dash and spaces",children:(0,v.jsx)(p.Z,{margin:"normal",error:!!z.name,helperText:z.name,required:!0,fullWidth:!0,id:"name",name:"name",value:A.name,label:"Name",autoComplete:"name",onChange:T})}),(0,v.jsx)(f.Z,{title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",children:(0,v.jsx)(p.Z,{margin:"normal",error:!!z.number,helperText:z.number,required:!0,fullWidth:!0,id:"number",name:"number",value:A.number,type:"tel",label:"Number",autoComplete:"current-password",onChange:T})}),(0,v.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{":hover":{bgcolor:"rgba(39, 183, 35, 0.459)",color:"black"},color:"black",backgroundColor:"#e4f9f5fa",borderColor:"green"},children:t?(0,v.jsx)(j.Q,{}):"Add Contact"})]})]})})},A=t(3466),N=t(9952),S=t(3695),F=t(5861),z=t(7757),I=t.n(z),W=t(9126),T=t(4373),q=t(43),P=t(3239),D=t(6856),E="styles_contactsList__jsDQS",L="styles_phoneNumber__J2zE-",Q="styles_contactName__qfqFT",K="styles_listItem__k5oOb",V="styles_buttons__3d7NZ",$=b.Z.getContactsStatus,B=function(e){var n=e.id,t=e.name,a=e.number,r=(0,i.I0)(),u="deleting"===(0,i.v9)($),l=(0,c.useState)(u),m=(0,s.Z)(l,2),d=m[0],h=m[1],f=function(){var e=(0,F.Z)(I().mark((function e(n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),r((0,Z.GK)(n)).unwrap().then((function(e){o.Am.success('Contact "'.concat(t,'" is deleting')),r((0,Z.yF)()).unwrap().then((function(){o.Am.success("Contacts updated")})).catch((function(){o.Am.error("Contacts didn't updated")}))})).catch((function(e){h(!1),console.log(e.message),o.Am.error('Contact "'.concat(t,'" is not deleting'))}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("li",{className:K,children:[(0,v.jsxs)("span",{className:Q,children:[(0,v.jsx)(T.H27,{size:20}),": ",t," "]}),(0,v.jsx)("span",{className:L,children:(0,v.jsxs)(q.Z,{href:"tel:".concat(a),color:"blue",underline:"hover",sx:{display:"flex"},children:[(0,v.jsx)(W.SPk,{size:15}),(0,v.jsx)("span",{children:" : "}),a]})}),(0,v.jsx)("button",{className:V,onClick:function(){return f(n)},children:d?(0,v.jsx)(P.Z,{size:24,color:"error"}):(0,v.jsx)(D.I0,{size:30})})]})})},G=t(3631),H=b.Z.getContactsStatus,J=b.Z.getFilterValue,O=b.Z.getFilteredContacts,Y=function(){var e=(0,i.I0)();(0,c.useEffect)((function(){e((0,Z.yF)()).unwrap().then((function(){o.Am.success("Contacts updated")})).catch((function(){o.Am.error("Contacts didn't updated")}))}),[e]);var n=(0,i.v9)(O),t="loading"===(0,i.v9)(H),a=(0,i.v9)(J);return(0,v.jsxs)(l.Z,{component:"div",maxWidth:"xs",children:[t&&(0,v.jsx)(S.Z,{}),(0,v.jsx)(f.Z,{title:"Find contacts. Please enter a name or number for search.",children:(0,v.jsx)(p.Z,{variant:"outlined",margin:"dense",fullWidth:!0,id:"name",name:"name",value:a,label:"Enter a search name or number",autoComplete:"name",onChange:function(n){e((0,G.h)(n.target.value))},InputProps:{startAdornment:(0,v.jsx)(A.Z,{position:"start",children:(0,v.jsx)(N.Z,{})})}})}),(0,v.jsx)("ul",{className:E,children:n.map((function(e){var n=e.id,t=e.name,a=e.number;return(0,v.jsx)(B,{name:t,number:a,id:n},n)}))})]})},M=function(){return(0,v.jsxs)("main",{children:[(0,v.jsx)(k,{}),(0,v.jsx)(Y,{})]})}}}]);
//# sourceMappingURL=contacts-page.0e573d1e.chunk.js.map